<!DOCTYPE html>
<html>
<head>
    <title>KJV Verse of the Day</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #page-title {
            font-size: 72px;
            font-family: "Arial", sans-serif;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }

        .centered-content {
            text-align: center;
        }

        #verse-text {
            font-size: 36px;
            font-family: "Cavolini", sans-serif;
            margin-bottom: 36px;
            max-width: 600px;
            margin-bottom: 20px;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <h1 id="page-title">KJV Verse of the Day</h1>
    <div class="centered-content">
        <div id="verse-text">Loading...</div>
    </div>
    <button id="read-chapter-button">Read Chapter</button>

    <script>
        let dayOfYear; // Define dayOfYear as a global variable

        document.addEventListener("DOMContentLoaded", function () {
            const verseDataUrl = 'bible_data_set.csv'; // Use a relative path if the .csv file is in the same directory as your HTML file
            const verseTextElement = document.getElementById("verse-text");
            let verses = [];

            // Fetch the .csv file
            fetch(verseDataUrl)
                .then(response => response.text())
                .then(data => {
                    // Split the CSV data into lines
                    const lines = data.split('\n');
                    verses = [];

                    // Skip the header row (first line)
                    for (let i = 1; i < lines.length; i++) {
                        // Split the line into columns
                        const [citation, book, chapter, verse, text] = lines[i].split(',');

                        // Create an object for each verse
                        verses.push({ citation, book, chapter, verse, text });
                    }

                    // Calculate the day of the year (1-365/366)
                    const currentDate = new Date();
                    dayOfYear = Math.floor((currentDate - new Date(currentDate.getFullYear(), 0, 0)) / 86400000);

                    // Display a daily verse when the page loads
                    getDailyVerse();
                })
                .catch(error => {
                    console.error('Error fetching .csv file:', error);
                });

            // Add this code inside your "DOMContentLoaded" event listener
            document.getElementById("read-chapter-button").addEventListener("click", function () {
                // Get the current Verse of the Day book and chapter
                const dailyVerse = verses[dayOfYear % verses.length];

                // Determine the URL for the full chapter
                const chapterURL = getChapterURL(dailyVerse.book, dailyVerse.chapter);

                // Open the chapter in a new tab or window
                window.open(chapterURL, "_blank");
            });

            // Define a function to select a daily verse based on the date
            function getDailyVerse() {
                // Use the day of the year to select a daily verse
                const dailyVerseIndex = dayOfYear % verses.length;
                const dailyVerse = verses[dailyVerseIndex];

                verseTextElement.innerHTML = dailyVerse.citation + ' ' + dailyVerse.text + '"';
            }
        });

        // Function to get the URL for the full chapter based on the book and chapter
        function getChapterURL(book, chapter) {
            // You can use an online Bible resource or your own source to provide the full chapter URL
            // Replace 'your_bible_resource_url' with the actual URL you want to use
            return `https://www.kingjamesbibleonline.org/${book}/${chapter}`;
        }
    </script>
</body>
</html>
